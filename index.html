<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>COIN PARTY ğŸ‰ Anime Worlds Casino</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ°</text></svg>"/>
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Nunito:wght@400;600;700;800;900&family=Bangers&display=swap" rel="stylesheet"/>
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{--text:#fff;--dim:rgba(255,255,255,0.5);--bg:#0a0a14}
body{min-height:100vh;background:var(--bg);color:var(--text);font-family:'Nunito',sans-serif;overflow-x:hidden}

/* TOPBAR */
.topbar{position:sticky;top:0;z-index:200;background:rgba(10,10,20,0.95);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,0.06);padding:8px 16px;display:flex;justify-content:space-between;align-items:center}
.logo{font-family:'Bangers',cursive;font-size:22px;cursor:pointer;display:flex;align-items:center;gap:6px;letter-spacing:1px}
.logo span{background:linear-gradient(135deg,#ff6b35,#ffd700);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.wallet{display:flex;align-items:center;gap:8px;background:rgba(255,215,0,0.1);border:2px solid rgba(255,215,0,0.25);border-radius:30px;padding:5px 14px 5px 10px}
.wallet-amt{font-family:'Fredoka',sans-serif;font-weight:700;font-size:17px;color:#ffd700}
.add-btn{background:linear-gradient(135deg,#ff6b35,#ff9a56);border:none;color:#fff;font-family:'Fredoka',sans-serif;font-weight:700;font-size:12px;padding:5px 10px;border-radius:14px;cursor:pointer;transition:.2s;margin-left:4px}
.add-btn:hover{transform:scale(1.05)}

/* LOBBY */
#lobby{max-width:900px;margin:0 auto;padding:20px 16px 60px}
.lobby-title{font-family:'Bangers',cursive;font-size:34px;text-align:center;margin-bottom:2px;letter-spacing:2px;background:linear-gradient(135deg,#ff6b35,#ffd700,#ff5ca1);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.lobby-sub{text-align:center;color:var(--dim);font-size:13px;margin-bottom:24px;font-weight:600}
.worlds-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.world-card{border-radius:18px;padding:18px 12px;cursor:pointer;transition:.3s;border:2px solid rgba(255,255,255,0.06);text-align:center;position:relative;overflow:hidden}
.world-card:hover{transform:translateY(-6px) scale(1.02);border-color:rgba(255,255,255,0.2);box-shadow:0 12px 40px rgba(0,0,0,0.4)}
.world-card .wc-icon{font-size:42px;margin-bottom:6px;display:block}
.world-card .wc-name{font-family:'Bangers',cursive;font-size:17px;letter-spacing:1px;margin-bottom:1px}
.world-card .wc-sub{font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;opacity:0.5}
.world-card .wc-game{font-size:11px;opacity:0.4;margin-top:4px}

/* GAME PAGES */
.game-page{display:none;min-height:100vh;position:relative}
.game-page.active{display:block;animation:fadeIn .35s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1}}
.game-inner{max-width:600px;margin:0 auto;padding:12px 16px 80px;position:relative;z-index:2}
.back-btn{background:rgba(255,255,255,0.08);border:none;color:#fff;font-family:'Fredoka',sans-serif;font-size:14px;font-weight:600;padding:8px 16px;border-radius:12px;cursor:pointer;margin-bottom:12px;transition:.2s;display:inline-flex;align-items:center;gap:4px}
.back-btn:hover{background:rgba(255,255,255,0.15)}
.game-hdr{text-align:center;margin-bottom:16px}
.game-hdr h2{font-family:'Bangers',cursive;font-size:28px;letter-spacing:2px}
.game-hdr p{font-size:12px;opacity:.5;margin-top:2px;font-weight:600}
.gcard{background:rgba(0,0,0,0.3);border:2px solid rgba(255,255,255,0.06);border-radius:18px;padding:18px;margin-bottom:12px;backdrop-filter:blur(8px)}
.gcard-t{font-family:'Fredoka',sans-serif;font-size:11px;font-weight:700;color:rgba(255,255,255,0.35);letter-spacing:2px;text-transform:uppercase;margin-bottom:8px}

/* CONTROLS */
.bet-row{display:flex;align-items:center;gap:5px;flex-wrap:wrap}
.bet-in{width:90px;padding:7px 10px;border-radius:10px;border:2px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.04);color:#fff;font-family:'Fredoka',sans-serif;font-size:15px;font-weight:700;text-align:center;outline:none}
.bet-in:focus{border-color:rgba(255,215,0,0.5)}
.bq{padding:5px 10px;border-radius:8px;border:1.5px solid rgba(255,255,255,0.08);background:none;color:var(--dim);font-family:'Fredoka',sans-serif;font-size:11px;font-weight:700;cursor:pointer;transition:.2s}
.bq:hover{border-color:rgba(255,215,0,0.5);color:#ffd700}
.btn{padding:11px 26px;border-radius:14px;border:none;font-family:'Bangers',cursive;font-size:18px;letter-spacing:1px;cursor:pointer;transition:.2s;color:#fff}
.btn:hover:not(:disabled){transform:scale(1.04);filter:brightness(1.15)}
.btn:disabled{opacity:.35;cursor:not-allowed}
.btn-sm{padding:8px 18px;font-size:15px;border-radius:11px}
.res-ban{text-align:center;padding:12px;border-radius:14px;font-family:'Bangers',cursive;font-size:20px;letter-spacing:1px;margin:10px 0;animation:popIn .3s cubic-bezier(.34,1.56,.64,1)}
@keyframes popIn{from{transform:scale(.8);opacity:0}to{transform:scale(1)}}
.res-w{background:rgba(86,232,160,0.12);border:2px solid rgba(86,232,160,0.3);color:#56e8a0}
.res-l{background:rgba(255,60,60,0.12);border:2px solid rgba(255,60,60,0.3);color:#ff5050}
.hrow{display:flex;gap:4px;flex-wrap:wrap;margin-top:6px}
.hpip{width:26px;height:26px;border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:800;font-family:'Fredoka',sans-serif}
.hw{background:rgba(86,232,160,0.15);color:#56e8a0}.hl{background:rgba(255,60,60,0.15);color:#ff5050}

/* PARTICLES */
.ptc{position:absolute;inset:0;pointer-events:none;overflow:hidden;z-index:1}
.pt{position:absolute;border-radius:50%;animation:ptFloat 18s infinite ease-in-out;opacity:.1}
@keyframes ptFloat{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-70px) scale(1.15)}}

/* === CRASH / DRAGON RUSH === */
.bg-dragon{background:linear-gradient(180deg,#1a0800 0%,#2d1500 30%,#0a0a14 100%)}
#crashCanvas{width:100%;height:280px;border-radius:14px;background:rgba(0,0,0,.35);display:block;border:2px solid rgba(255,107,53,0.15)}
.crash-mult{text-align:center;font-family:'Bangers',cursive;font-size:52px;letter-spacing:3px;margin:6px 0;text-shadow:0 0 30px rgba(255,107,53,0.3)}
.crash-st{text-align:center;font-size:12px;color:var(--dim);margin-bottom:8px}

/* === SLOTS / POCKET CREATURES === */
.bg-pocket{background:linear-gradient(180deg,#1a0505 0%,#2d0a0a 30%,#0a0a14 100%)}
.slots-wrap{background:linear-gradient(180deg,rgba(220,30,30,.12),rgba(255,255,255,.03));border:2px solid rgba(220,30,30,.2);border-radius:20px;padding:18px;text-align:center}
.reels{display:flex;justify-content:center;gap:10px;margin:12px 0}
.reel{width:80px;height:90px;background:rgba(0,0,0,.4);border-radius:14px;border:2px solid rgba(220,30,30,.15);display:flex;align-items:center;justify-content:center;font-size:42px}
.reel.spin{animation:rSp .1s steps(1) infinite}
@keyframes rSp{0%{transform:translateY(-2px)}50%{transform:translateY(2px)}}
.pay-grid{display:grid;grid-template-columns:1fr 1fr;gap:4px;margin-top:8px;font-size:11px;color:var(--dim)}
.pay-grid div{padding:3px 6px;background:rgba(0,0,0,.2);border-radius:6px}

/* === ROULETTE / NINJA WHEEL === */
.bg-ninja{background:linear-gradient(180deg,#0d0a00 0%,#1a1500 30%,#0a0a14 100%)}
.rl-wrap{position:relative;width:230px;height:230px;margin:0 auto 12px}
.rl-wheel{width:230px;height:230px;border-radius:50%;border:5px solid rgba(255,150,0,0.25);background:conic-gradient(#c0392b 0deg 9.73deg,#2c3e50 9.73deg 19.46deg,#c0392b 19.46deg 29.19deg,#2c3e50 29.19deg 38.92deg,#c0392b 38.92deg 48.65deg,#2c3e50 48.65deg 58.38deg,#c0392b 58.38deg 68.11deg,#2c3e50 68.11deg 77.84deg,#c0392b 77.84deg 87.57deg,#2c3e50 87.57deg 97.3deg,#27ae60 97.3deg 106.03deg,#c0392b 106.03deg 115.76deg,#2c3e50 115.76deg 125.49deg,#c0392b 125.49deg 135.22deg,#2c3e50 135.22deg 144.95deg,#c0392b 144.95deg 154.68deg,#2c3e50 154.68deg 164.41deg,#c0392b 164.41deg 174.14deg,#2c3e50 174.14deg 183.87deg,#c0392b 183.87deg 193.6deg,#2c3e50 193.6deg 203.33deg,#c0392b 203.33deg 213.06deg,#2c3e50 213.06deg 222.79deg,#c0392b 222.79deg 232.52deg,#2c3e50 232.52deg 242.25deg,#c0392b 242.25deg 251.98deg,#2c3e50 251.98deg 261.71deg,#c0392b 261.71deg 271.44deg,#2c3e50 271.44deg 281.17deg,#27ae60 281.17deg 290.9deg,#c0392b 290.9deg 300.63deg,#2c3e50 300.63deg 310.36deg,#c0392b 310.36deg 320.09deg,#2c3e50 320.09deg 329.82deg,#c0392b 329.82deg 339.55deg,#2c3e50 339.55deg 349.28deg,#c0392b 349.28deg 360deg);transition:transform 4s cubic-bezier(.2,.8,.3,1);box-shadow:0 0 30px rgba(255,150,0,.2),inset 0 0 40px rgba(0,0,0,.5)}
.rl-ptr{position:absolute;top:-12px;left:50%;transform:translateX(-50%);font-size:22px;z-index:5}
.rl-ctr{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:48px;height:48px;border-radius:50%;background:#0d0a00;border:2px solid rgba(255,150,0,.3);display:flex;align-items:center;justify-content:center;font-family:'Bangers',cursive;font-size:15px;z-index:3}
.rl-bets{display:grid;grid-template-columns:1fr 1fr 1fr;gap:6px;margin:8px 0}
.rb{padding:9px;border-radius:11px;border:2px solid rgba(255,255,255,.06);background:none;font-family:'Fredoka',sans-serif;font-size:13px;font-weight:700;cursor:pointer;transition:.2s;text-align:center}
.rb:hover{transform:scale(1.03)}.rb.sel{border-width:3px;transform:scale(1.05)}
.rb-r{color:#e74c3c}.rb-r.sel{border-color:#e74c3c;background:rgba(231,76,60,.1)}
.rb-b{color:#aaa}.rb-b.sel{border-color:#aaa;background:rgba(170,170,170,.1)}
.rb-g{color:#27ae60}.rb-g.sel{border-color:#27ae60;background:rgba(39,174,96,.1)}

/* === BLACKJACK / SHADOW LEDGER === */
.bg-shadow{background:linear-gradient(180deg,#0a0005 0%,#1a000a 30%,#0a0a14 100%)}
.bj-tbl{background:linear-gradient(180deg,rgba(180,0,50,.1),rgba(0,0,0,.2));border:2px solid rgba(180,0,50,.2);border-radius:18px;padding:14px}
.bj-lbl{font-family:'Fredoka',sans-serif;font-size:11px;color:var(--dim);font-weight:700;letter-spacing:1px;margin-bottom:4px}
.bj-hand{display:flex;gap:5px;min-height:68px;flex-wrap:wrap;margin-bottom:10px}
.bj-c{width:48px;height:66px;border-radius:8px;background:#fff;color:#1a1033;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:'Fredoka',sans-serif;font-weight:700;font-size:15px;box-shadow:0 3px 10px rgba(0,0,0,.3);animation:dealC .3s ease-out}
.bj-c.red{color:#b00030}
.bj-c.fd{background:linear-gradient(135deg,#2a0015,#1a000a);color:transparent}.bj-c.fd::after{content:'âœ¦';position:absolute;font-size:18px;color:rgba(180,0,50,.4)}
@keyframes dealC{from{transform:translateY(-15px) rotate(-5deg);opacity:0}to{transform:translateY(0);opacity:1}}
.bj-sc{font-family:'Fredoka',sans-serif;font-weight:700;font-size:18px;margin-left:6px}
.bj-div{height:1px;background:rgba(180,0,50,.15);margin:6px 0}
.bj-acts{display:flex;gap:6px;justify-content:center;flex-wrap:wrap;margin-top:8px}

/* === PLINKO / PIRATE PLUNDER === */
.bg-pirate{background:linear-gradient(180deg,#00080f 0%,#001525 30%,#0a0a14 100%)}
#plinkoCanvas{width:100%;height:380px;display:block;border-radius:14px;background:rgba(0,0,0,.35);border:2px solid rgba(0,150,255,0.12)}

/* === MINES / TITAN FIELD === */
.bg-titan{background:linear-gradient(180deg,#0a0800 0%,#1a1505 30%,#0a0a14 100%)}
.mines-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:5px;max-width:300px;margin:0 auto}
.mine-cell{aspect-ratio:1;border-radius:10px;background:rgba(120,100,60,.12);border:2px solid rgba(120,100,60,.2);display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;transition:.2s;font-family:'Fredoka',sans-serif;font-weight:700}
.mine-cell:hover:not(.rv){background:rgba(120,100,60,.25);transform:scale(1.05)}
.mine-cell.rv{cursor:default}
.mine-cell.gem{background:rgba(0,200,100,.12);border-color:rgba(0,200,100,.35)}
.mine-cell.bomb{background:rgba(255,50,50,.12);border-color:rgba(255,50,50,.35)}
.mines-info{text-align:center;font-family:'Bangers',cursive;font-size:22px;letter-spacing:1px;margin:8px 0}

/* === DICE / BREATH DICE === */
.bg-breath{background:linear-gradient(180deg,#050a10 0%,#0a1a2a 30%,#0a0a14 100%)}
.dice-num{font-family:'Bangers',cursive;font-size:60px;text-align:center;letter-spacing:3px;text-shadow:0 0 20px rgba(0,200,200,.3)}
.dice-slider{width:100%;-webkit-appearance:none;height:8px;border-radius:4px;background:linear-gradient(90deg,#00cccc 0%,#00cccc 50%,#ff5050 50%,#ff5050 100%);outline:none;margin:12px 0}
.dice-slider::-webkit-slider-thumb{-webkit-appearance:none;width:22px;height:22px;border-radius:50%;background:#fff;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.3)}
.dice-labels{display:flex;justify-content:space-between;font-size:12px;color:var(--dim)}
.dc-row{display:flex;gap:8px;justify-content:center;margin:10px 0}
.dc{padding:9px 18px;border-radius:11px;border:2px solid rgba(255,255,255,.08);background:none;font-family:'Fredoka',sans-serif;font-size:13px;font-weight:700;cursor:pointer;transition:.2s}
.dc:hover{transform:scale(1.03)}.dc.sel{border-width:3px}
.dc-o{color:#00cccc}.dc-o.sel{border-color:#00cccc;background:rgba(0,200,200,.1)}
.dc-u{color:#ff5050}.dc-u.sel{border-color:#ff5050;background:rgba(255,80,80,.1)}

/* === TOWER / HERO TOWER === */
.bg-hero{background:linear-gradient(180deg,#0a0510 0%,#150a25 30%,#0a0a14 100%)}
.tower-grid{display:flex;flex-direction:column-reverse;gap:5px;max-width:380px;margin:0 auto}
.tower-floor{display:grid;grid-template-columns:repeat(3,1fr);gap:5px}
.tower-door{padding:14px;border-radius:11px;background:rgba(100,50,200,.08);border:2px solid rgba(100,50,200,.15);text-align:center;font-size:18px;cursor:pointer;transition:.2s;font-family:'Fredoka',sans-serif;font-weight:700}
.tower-door:hover:not(.rv){background:rgba(100,50,200,.18);transform:scale(1.03)}
.tower-door.rv{cursor:default}
.tower-door.safe{background:rgba(255,215,0,.12);border-color:rgba(255,215,0,.35)}
.tower-door.trap{background:rgba(255,50,50,.12);border-color:rgba(255,50,50,.35)}
.tower-door.cur{border-color:rgba(100,50,200,.5);box-shadow:0 0 10px rgba(100,50,200,.2)}
.tower-info{text-align:center;font-family:'Bangers',cursive;font-size:22px;letter-spacing:1px;margin:8px 0}
.tfl{font-size:10px;color:var(--dim);text-align:center;margin-bottom:2px;font-weight:700}

/* === FLIP / FATE DUEL === */
.bg-fate{background:linear-gradient(180deg,#0a0515 0%,#1a0a30 30%,#0a0a14 100%)}
.flip-coin{width:130px;height:130px;margin:16px auto;perspective:600px}
.flip-inner{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform .8s ease}
.flip-inner.flipping{animation:cFlip .8s ease}
@keyframes cFlip{0%{transform:rotateY(0)}100%{transform:rotateY(1800deg)}}
.flip-face{position:absolute;inset:0;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:54px;backface-visibility:hidden;border:3px solid rgba(255,255,255,.15);box-shadow:0 6px 25px rgba(0,0,0,.3)}
.flip-heads{background:linear-gradient(135deg,#ffd700,#b8860b)}
.flip-tails{background:linear-gradient(135deg,#6a0dad,#2d0050);transform:rotateY(180deg)}
.fc-row{display:flex;gap:8px;justify-content:center;margin:10px 0}
.fc{padding:10px 22px;border-radius:12px;border:2px solid rgba(255,255,255,.08);background:none;font-family:'Bangers',cursive;font-size:16px;letter-spacing:1px;cursor:pointer;transition:.2s}
.fc:hover{transform:scale(1.03)}.fc.sel{border-width:3px}
.fc-h{color:#ffd700}.fc-h.sel{border-color:#ffd700;background:rgba(255,215,0,.1)}
.fc-t{color:#9b59b6}.fc-t.sel{border-color:#9b59b6;background:rgba(155,89,182,.1)}

/* CONFETTI & TOAST */
.conf-wrap{position:fixed;inset:0;pointer-events:none;z-index:9999}
.conf{position:absolute;width:8px;height:8px;border-radius:2px;animation:confF 1.5s ease-out forwards}
@keyframes confF{0%{transform:translateY(-20px) rotate(0);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}
.toast{position:fixed;bottom:70px;left:50%;transform:translateX(-50%);padding:10px 22px;border-radius:14px;font-family:'Bangers',cursive;font-size:16px;letter-spacing:1px;z-index:9999;animation:toastIn .3s ease;white-space:nowrap;color:#fff}
@keyframes toastIn{from{transform:translateX(-50%) translateY(20px);opacity:0}to{transform:translateX(-50%);opacity:1}}

@media(max-width:500px){.worlds-grid{gap:8px}.world-card{padding:12px 8px}.world-card .wc-icon{font-size:32px}.world-card .wc-name{font-size:14px}.reel{width:64px;height:76px;font-size:36px}.crash-mult{font-size:40px}.rl-wrap,.rl-wheel{width:200px;height:200px}.bj-c{width:42px;height:58px;font-size:13px}#plinkoCanvas{height:300px}.mine-cell{font-size:16px}.dice-num{font-size:44px}.flip-coin{width:100px;height:100px}.flip-face{font-size:40px}}
</style>
</head>
<body>

<div class="topbar">
  <div class="logo" onclick="goLobby()">âš”ï¸ <span>COIN PARTY</span></div>
  <div class="wallet"><span style="font-size:18px">ğŸª™</span><div class="wallet-amt" id="bal">10,000</div><button class="add-btn" onclick="addCoins()">+ FREE</button></div>
</div>

<div id="lobby">
  <div class="lobby-title">âš”ï¸ CHOOSE YOUR REALM</div>
  <div class="lobby-sub">9 Anime-Inspired Worlds â€¢ Play Money Casino</div>
  <div class="worlds-grid">
    <div class="world-card" onclick="go('crash')" style="background:linear-gradient(135deg,#2d1500,#1a0800);border-color:rgba(255,107,53,.2)"><span class="wc-icon">ğŸ‰</span><div class="wc-name" style="color:#ff6b35">DRAGON RUSH</div><div class="wc-sub">Power Level Rising</div><div class="wc-game">Crash Game</div></div>
    <div class="world-card" onclick="go('slots')" style="background:linear-gradient(135deg,#2d0a0a,#1a0505);border-color:rgba(220,30,30,.2)"><span class="wc-icon">ğŸ”®</span><div class="wc-name" style="color:#dc1e1e">POCKET CREATURES</div><div class="wc-sub">Catch Rare Ones</div><div class="wc-game">Slots</div></div>
    <div class="world-card" onclick="go('roulette')" style="background:linear-gradient(135deg,#1a1500,#0d0a00);border-color:rgba(255,150,0,.2)"><span class="wc-icon">ğŸ¥</span><div class="wc-name" style="color:#ff9600">NINJA WHEEL</div><div class="wc-sub">Wheel of Jutsu</div><div class="wc-game">Roulette</div></div>
    <div class="world-card" onclick="go('blackjack')" style="background:linear-gradient(135deg,#1a000a,#0a0005);border-color:rgba(180,0,50,.2)"><span class="wc-icon">ğŸ““</span><div class="wc-name" style="color:#b40032">SHADOW LEDGER</div><div class="wc-sub">Write Your Fate</div><div class="wc-game">Blackjack</div></div>
    <div class="world-card" onclick="go('plinko')" style="background:linear-gradient(135deg,#001525,#00080f);border-color:rgba(0,150,255,.2)"><span class="wc-icon">ğŸ´â€â˜ ï¸</span><div class="wc-name" style="color:#0096ff">PIRATE PLUNDER</div><div class="wc-sub">Treasure of the Sea</div><div class="wc-game">Plinko</div></div>
    <div class="world-card" onclick="go('mines')" style="background:linear-gradient(135deg,#1a1505,#0a0800);border-color:rgba(120,100,60,.2)"><span class="wc-icon">âš”ï¸</span><div class="wc-name" style="color:#8c7a3c">TITAN FIELD</div><div class="wc-sub">Beyond the Walls</div><div class="wc-game">Mines</div></div>
    <div class="world-card" onclick="go('dice')" style="background:linear-gradient(135deg,#0a1a2a,#050a10);border-color:rgba(0,200,200,.2)"><span class="wc-icon">ğŸŒŠ</span><div class="wc-name" style="color:#00cccc">BREATH DICE</div><div class="wc-sub">Breathing Forms</div><div class="wc-game">Dice</div></div>
    <div class="world-card" onclick="go('tower')" style="background:linear-gradient(135deg,#150a25,#0a0510);border-color:rgba(100,50,200,.2)"><span class="wc-icon">ğŸ¦¸</span><div class="wc-name" style="color:#6432c8">HERO TOWER</div><div class="wc-sub">Go Beyond Plus Ultra</div><div class="wc-game">Tower</div></div>
    <div class="world-card" onclick="go('flip')" style="background:linear-gradient(135deg,#1a0a30,#0a0515);border-color:rgba(155,89,182,.2)"><span class="wc-icon">ğŸƒ</span><div class="wc-name" style="color:#9b59b6">FATE DUEL</div><div class="wc-sub">Flip Your Destiny</div><div class="wc-game">Coin Flip</div></div>
  </div>
</div>

<!-- ===== DRAGON RUSH (Crash) ===== -->
<div class="game-page bg-dragon" id="pg-crash">
  <div class="ptc" id="pt-crash"></div>
  <div class="game-inner">
    <button class="back-btn" onclick="goLobby()">â† Realms</button>
    <div class="game-hdr"><h2 style="color:#ff6b35">ğŸ‰ DRAGON RUSH</h2><p>Your power level is rising... cash out before you overload!</p></div>
    <div class="gcard"><canvas id="crashCanvas"></canvas><div class="crash-mult" id="cMult" style="color:#ff6b35">1.00Ã—</div><div class="crash-st" id="cSt">Channel your energy and launch!</div><div id="cRes"></div></div>
    <div class="gcard"><div class="gcard-t">âš¡ Power Bet</div><div class="bet-row"><input class="bet-in" type="number" id="cBet" value="100" min="10"/><button class="bq" onclick="sb('cBet',50)">50</button><button class="bq" onclick="sb('cBet',100)">100</button><button class="bq" onclick="sb('cBet',500)">500</button><button class="bq" onclick="sb('cBet','h')">Â½</button><button class="bq" onclick="sb('cBet','m')">MAX</button></div><div style="text-align:center;margin-top:10px"><button class="btn" id="cStartBtn" onclick="cStart()" style="background:linear-gradient(135deg,#ff6b35,#ff9a56)">ğŸ‰ POWER UP!</button><button class="btn" id="cCashBtn" onclick="cCash()" style="display:none;background:linear-gradient(135deg,#ffd700,#ffaa00)">âš¡ CASH OUT!</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ“Š Battle Log</div><div class="hrow" id="cH"></div></div>
  </div>
</div>

<!-- ===== POCKET CREATURES (Slots) ===== -->
<div class="game-page bg-pocket" id="pg-slots">
  <div class="ptc" id="pt-slots"></div>
  <div class="game-inner">
    <button class="back-btn" onclick="goLobby()">â† Realms</button>
    <div class="game-hdr"><h2 style="color:#dc1e1e">ğŸ”® POCKET CREATURES</h2><p>Spin to catch wild creatures!</p></div>
    <div class="gcard"><div class="slots-wrap"><div style="font-family:'Bangers',cursive;font-size:20px;letter-spacing:1px;color:#dc1e1e;margin-bottom:4px">CREATURE CATCHER</div><div class="reels"><div class="reel" id="s0">ğŸ²</div><div class="reel" id="s1">âš¡</div><div class="reel" id="s2">ğŸ”¥</div></div><div id="sRes"></div></div><div class="pay-grid"><div>ğŸŒŸğŸŒŸğŸŒŸ Ã—20 Legendary</div><div>ğŸ²ğŸ²ğŸ² Ã—15 Dragon</div><div>âš¡âš¡âš¡ Ã—10 Thunder</div><div>ğŸ”¥ğŸ”¥ğŸ”¥ Ã—5 Fire</div><div>ğŸŒ¿ğŸŒ¿ğŸŒ¿ Ã—4 Grass</div><div>ğŸ’§ğŸ’§ğŸ’§ Ã—3 Water</div><div>ğŸª¨ğŸª¨ğŸª¨ Ã—3 Rock</div><div>2 match Ã—1.5</div></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ”® Bet</div><div class="bet-row"><input class="bet-in" type="number" id="sBet" value="100" min="10"/><button class="bq" onclick="sb('sBet',50)">50</button><button class="bq" onclick="sb('sBet',100)">100</button><button class="bq" onclick="sb('sBet',500)">500</button><button class="bq" onclick="sb('sBet','h')">Â½</button><button class="bq" onclick="sb('sBet','m')">MAX</button></div><div style="text-align:center;margin-top:10px"><button class="btn" id="sBtn" onclick="sSpin()" style="background:linear-gradient(135deg,#dc1e1e,#ff4444)">ğŸ”® CATCH!</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ“Š PokÃ©dex Log</div><div class="hrow" id="sH"></div></div>
  </div>
</div>

<!-- ===== NINJA WHEEL (Roulette) ===== -->
<div class="game-page bg-ninja" id="pg-roulette">
  <div class="ptc" id="pt-roulette"></div>
  <div class="game-inner">
    <button class="back-btn" onclick="goLobby()">â† Realms</button>
    <div class="game-hdr"><h2 style="color:#ff9600">ğŸ¥ NINJA WHEEL</h2><p>Spin the wheel of jutsu â€” believe it!</p></div>
    <div class="gcard"><div class="rl-wrap"><div class="rl-ptr">ğŸ”»</div><div class="rl-wheel" id="rW"></div><div class="rl-ctr" id="rN">?</div></div><div id="rRes"></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ¯ Jutsu Style</div><div class="rl-bets"><button class="rb rb-r" onclick="rSel('red',this)">ğŸ”´ Fire Ã—2</button><button class="rb rb-g" onclick="rSel('green',this)">ğŸŸ¢ Wind Ã—14</button><button class="rb rb-b" onclick="rSel('black',this)">âš« Shadow Ã—2</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ’° Bet</div><div class="bet-row"><input class="bet-in" type="number" id="rBet" value="100" min="10"/><button class="bq" onclick="sb('rBet',50)">50</button><button class="bq" onclick="sb('rBet',100)">100</button><button class="bq" onclick="sb('rBet',500)">500</button><button class="bq" onclick="sb('rBet','h')">Â½</button><button class="bq" onclick="sb('rBet','m')">MAX</button></div><div style="text-align:center;margin-top:10px"><button class="btn" id="rBtn" onclick="rSpin()" style="background:linear-gradient(135deg,#ff9600,#ffb84d)">ğŸ¥ SPIN!</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ“Š Mission Log</div><div class="hrow" id="rH"></div></div>
  </div>
</div>

<!-- ===== SHADOW LEDGER (Blackjack) ===== -->
<div class="game-page bg-shadow" id="pg-blackjack">
  <div class="ptc" id="pt-bj"></div>
  <div class="game-inner">
    <button class="back-btn" onclick="goLobby()">â† Realms</button>
    <div class="game-hdr"><h2 style="color:#b40032">ğŸ““ SHADOW LEDGER</h2><p>Write the dealer's name in the ledger...</p></div>
    <div class="gcard"><div class="bj-tbl"><div class="bj-lbl">SHINIGAMI <span class="bj-sc" id="dSc"></span></div><div class="bj-hand" id="dH"></div><div class="bj-div"></div><div class="bj-lbl">YOU <span class="bj-sc" id="pSc"></span></div><div class="bj-hand" id="pH"></div></div><div id="bjRes"></div><div class="bj-acts" id="bjA" style="display:none"><button class="btn btn-sm" onclick="bjHit()" style="background:linear-gradient(135deg,#b40032,#e00040)">ğŸ““ DRAW</button><button class="btn btn-sm" onclick="bjStand()" style="background:linear-gradient(135deg,#555,#888)">âœ‹ HOLD</button><button class="btn btn-sm" id="bjDb" onclick="bjDbl()" style="background:linear-gradient(135deg,#8b0000,#b40032)">ğŸ’€ DOUBLE</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ’° Bet</div><div class="bet-row"><input class="bet-in" type="number" id="bjBet" value="100" min="10"/><button class="bq" onclick="sb('bjBet',50)">50</button><button class="bq" onclick="sb('bjBet',100)">100</button><button class="bq" onclick="sb('bjBet',500)">500</button><button class="bq" onclick="sb('bjBet','h')">Â½</button><button class="bq" onclick="sb('bjBet','m')">MAX</button></div><div style="text-align:center;margin-top:10px"><button class="btn btn-sm" id="bjDBtn" onclick="bjDeal()" style="background:linear-gradient(135deg,#b40032,#e00040)">ğŸ““ DEAL</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ“Š Death Log</div><div class="hrow" id="bjH"></div></div>
  </div>
</div>

<!-- ===== PIRATE PLUNDER (Plinko) ===== -->
<div class="game-page bg-pirate" id="pg-plinko">
  <div class="ptc" id="pt-pl"></div>
  <div class="game-inner">
    <button class="back-btn" onclick="goLobby()">â† Realms</button>
    <div class="game-hdr"><h2 style="color:#0096ff">ğŸ´â€â˜ ï¸ PIRATE PLUNDER</h2><p>Drop the treasure through the reef!</p></div>
    <div class="gcard"><canvas id="plinkoCanvas"></canvas><div id="plRes"></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ’° Treasure Bet</div><div class="bet-row"><input class="bet-in" type="number" id="plBet" value="100" min="10"/><button class="bq" onclick="sb('plBet',50)">50</button><button class="bq" onclick="sb('plBet',100)">100</button><button class="bq" onclick="sb('plBet',500)">500</button><button class="bq" onclick="sb('plBet','h')">Â½</button><button class="bq" onclick="sb('plBet','m')">MAX</button></div><div style="text-align:center;margin-top:10px"><button class="btn" id="plBtn" onclick="plDrop()" style="background:linear-gradient(135deg,#0096ff,#40b0ff)">ğŸ´â€â˜ ï¸ DROP!</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ“Š Treasure Log</div><div class="hrow" id="plH"></div></div>
  </div>
</div>

<!-- ===== TITAN FIELD (Mines) ===== -->
<div class="game-page bg-titan" id="pg-mines">
  <div class="ptc" id="pt-mn"></div>
  <div class="game-inner">
    <button class="back-btn" onclick="goLobby()">â† Realms</button>
    <div class="game-hdr"><h2 style="color:#8c7a3c">âš”ï¸ TITAN FIELD</h2><p>Scout beyond the walls â€” avoid the Titans</p></div>
    <div class="gcard"><div class="mines-info" id="mInfo">Scout the field for supplies! âš”ï¸</div><div class="mines-grid" id="mGrid"></div><div id="mRes"></div><div style="text-align:center;margin-top:8px"><button class="btn btn-sm" id="mCashBtn" onclick="mCash()" style="display:none;background:linear-gradient(135deg,#8c7a3c,#b8a050)">ğŸ° Retreat & Cash Out</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ‘¹ Titans hidden</div><div class="bet-row" style="margin-bottom:6px"><button class="bq" onclick="setMn(3)" id="mb3" style="border-color:#8c7a3c;color:#8c7a3c">3</button><button class="bq" onclick="setMn(5)" id="mb5">5</button><button class="bq" onclick="setMn(7)" id="mb7">7</button><button class="bq" onclick="setMn(10)" id="mb10">10</button></div><div class="gcard-t">ğŸ’° Bet</div><div class="bet-row"><input class="bet-in" type="number" id="mBet" value="100" min="10"/><button class="bq" onclick="sb('mBet',50)">50</button><button class="bq" onclick="sb('mBet',100)">100</button><button class="bq" onclick="sb('mBet',500)">500</button><button class="bq" onclick="sb('mBet','h')">Â½</button><button class="bq" onclick="sb('mBet','m')">MAX</button></div><div style="text-align:center;margin-top:8px"><button class="btn btn-sm" id="mSBtn" onclick="mStart()" style="background:linear-gradient(135deg,#8c7a3c,#b8a050)">âš”ï¸ SCOUT!</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ“Š Expedition Log</div><div class="hrow" id="mH"></div></div>
  </div>
</div>

<!-- ===== BREATH DICE (Dice) ===== -->
<div class="game-page bg-breath" id="pg-dice">
  <div class="ptc" id="pt-dc"></div>
  <div class="game-inner">
    <button class="back-btn" onclick="goLobby()">â† Realms</button>
    <div class="game-hdr"><h2 style="color:#00cccc">ğŸŒŠ BREATH DICE</h2><p>Focus your breathing form â€” roll the dice</p></div>
    <div class="gcard"><div class="dice-num" id="dNum" style="color:#00cccc">?</div><div style="padding:0 10px"><input type="range" class="dice-slider" id="dSlider" min="5" max="95" value="50" oninput="dUpd()"/><div class="dice-labels"><span>Safe</span><span id="dTgt">50</span><span>Risky</span></div></div><div class="dc-row"><button class="dc dc-u" onclick="dSel('under',this)">â¬‡ Water</button><button class="dc dc-o sel" onclick="dSel('over',this)">â¬† Flame</button></div><div style="text-align:center;font-size:13px;color:var(--dim)" id="dOdds">Ã—2.00 â€¢ 50% chance</div><div id="dRes"></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ’° Bet</div><div class="bet-row"><input class="bet-in" type="number" id="dBet" value="100" min="10"/><button class="bq" onclick="sb('dBet',50)">50</button><button class="bq" onclick="sb('dBet',100)">100</button><button class="bq" onclick="sb('dBet',500)">500</button><button class="bq" onclick="sb('dBet','h')">Â½</button><button class="bq" onclick="sb('dBet','m')">MAX</button></div><div style="text-align:center;margin-top:10px"><button class="btn" id="dBtn" onclick="dRoll()" style="background:linear-gradient(135deg,#00cccc,#40e0e0)">ğŸŒŠ BREATHE!</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ“Š Form Log</div><div class="hrow" id="dH"></div></div>
  </div>
</div>

<!-- ===== HERO TOWER (Tower) ===== -->
<div class="game-page bg-hero" id="pg-tower">
  <div class="ptc" id="pt-tw"></div>
  <div class="game-inner">
    <button class="back-btn" onclick="goLobby()">â† Realms</button>
    <div class="game-hdr"><h2 style="color:#6432c8">ğŸ¦¸ HERO TOWER</h2><p>Climb the floors â€” go beyond, PLUS ULTRA!</p></div>
    <div class="gcard"><div class="tower-info" id="tInfo">Choose your door, hero! ğŸ¦¸</div><div class="tower-grid" id="tGrid"></div><div id="tRes"></div><div style="text-align:center;margin-top:8px"><button class="btn btn-sm" id="tCashBtn" onclick="tCash()" style="display:none;background:linear-gradient(135deg,#ffd700,#ffaa00)">ğŸ† Claim Victory</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ’° Bet</div><div class="bet-row"><input class="bet-in" type="number" id="tBet" value="100" min="10"/><button class="bq" onclick="sb('tBet',50)">50</button><button class="bq" onclick="sb('tBet',100)">100</button><button class="bq" onclick="sb('tBet',500)">500</button><button class="bq" onclick="sb('tBet','h')">Â½</button><button class="bq" onclick="sb('tBet','m')">MAX</button></div><div style="text-align:center;margin-top:8px"><button class="btn btn-sm" id="tSBtn" onclick="tStart()" style="background:linear-gradient(135deg,#6432c8,#8050e0)">ğŸ¦¸ GO BEYOND!</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ“Š Hero Log</div><div class="hrow" id="tH"></div></div>
  </div>
</div>

<!-- ===== FATE DUEL (Flip) ===== -->
<div class="game-page bg-fate" id="pg-flip">
  <div class="ptc" id="pt-fl"></div>
  <div class="game-inner">
    <button class="back-btn" onclick="goLobby()">â† Realms</button>
    <div class="game-hdr"><h2 style="color:#9b59b6">ğŸƒ FATE DUEL</h2><p>Activate your trap card â€” flip destiny!</p></div>
    <div class="gcard"><div class="flip-coin"><div class="flip-inner" id="fInner"><div class="flip-face flip-heads">ğŸ‘‘</div><div class="flip-face flip-tails">ğŸ’€</div></div></div><div class="fc-row"><button class="fc fc-h" onclick="fSel('heads',this)">ğŸ‘‘ Light</button><button class="fc fc-t" onclick="fSel('tails',this)">ğŸ’€ Dark</button></div><div id="fRes"></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ’° Bet</div><div class="bet-row"><input class="bet-in" type="number" id="fBet" value="100" min="10"/><button class="bq" onclick="sb('fBet',50)">50</button><button class="bq" onclick="sb('fBet',100)">100</button><button class="bq" onclick="sb('fBet',500)">500</button><button class="bq" onclick="sb('fBet','h')">Â½</button><button class="bq" onclick="sb('fBet','m')">MAX</button></div><div style="text-align:center;margin-top:10px"><button class="btn" id="fBtn" onclick="fFlip()" style="background:linear-gradient(135deg,#9b59b6,#c77dff)">ğŸƒ DUEL!</button></div></div>
    <div class="gcard"><div class="gcard-t">ğŸ“Š Duel Log</div><div class="hrow" id="fH"></div></div>
  </div>
</div>

<div class="conf-wrap" id="confW"></div>

<script>
let B=10000;
function uB(a){B+=a;if(B<0)B=0;document.getElementById('bal').textContent=B.toLocaleString();try{localStorage.setItem('cp3',B)}catch(e){}}
function addCoins(){uB(5000);toast('ğŸ +5,000 coins!','#ff6b35')}
function sb(id,v){const i=document.getElementById(id);if(v==='h')i.value=Math.max(10,~~(parseInt(i.value)/2));else if(v==='m')i.value=Math.min(B,10000);else i.value=v}
function gb(id){const v=parseInt(document.getElementById(id).value)||0;if(v<10){toast('âš ï¸ Min 10','#ff5050');return 0}if(v>B){toast('âš ï¸ Not enough!','#ff5050');return 0}return v}
function go(g){document.getElementById('lobby').style.display='none';document.querySelectorAll('.game-page').forEach(p=>p.classList.remove('active'));document.getElementById('pg-'+g).classList.add('active');window.scrollTo(0,0);if(g==='plinko')plRz();if(g==='crash')crRz()}
function goLobby(){document.querySelectorAll('.game-page').forEach(p=>p.classList.remove('active'));document.getElementById('lobby').style.display='';window.scrollTo(0,0)}
const H={};
function aH(g,w,l){if(!H[g])H[g]=[];H[g].unshift({w,l});if(H[g].length>20)H[g].pop();const e=document.getElementById(g+'H');if(e)e.innerHTML=H[g].map(x=>`<div class="hpip ${x.w?'hw':'hl'}">${x.l}</div>`).join('')}
function toast(m,c){const t=document.createElement('div');t.className='toast';t.style.background=c||'#9b59b6';t.textContent=m;document.body.appendChild(t);setTimeout(()=>t.remove(),2000)}
function conf(){const c=document.getElementById('confW'),cols=['#ff6b35','#ffd700','#dc1e1e','#ff9600','#0096ff','#00cccc','#6432c8','#9b59b6','#b40032'];for(let i=0;i<40;i++){const p=document.createElement('div');p.className='conf';p.style.left=Math.random()*100+'vw';p.style.background=cols[~~(Math.random()*cols.length)];p.style.animationDelay=Math.random()*.5+'s';c.appendChild(p)}setTimeout(()=>c.innerHTML='',2500)}
function sR(el,w,m){document.getElementById(el).innerHTML=`<div class="res-ban ${w?'res-w':'res-l'}">${m}</div>`;setTimeout(()=>{const e=document.getElementById(el);if(e)e.innerHTML=''},4000)}
function mkP(id,colors){const c=document.getElementById(id);if(!c)return;for(let i=0;i<8;i++){const b=document.createElement('div');b.className='pt';const sz=50+Math.random()*180;b.style.width=sz+'px';b.style.height=sz+'px';b.style.left=Math.random()*100+'%';b.style.top=Math.random()*100+'%';b.style.background=colors[~~(Math.random()*colors.length)];b.style.animationDelay=Math.random()*15+'s';b.style.animationDuration=(12+Math.random()*12)+'s';c.appendChild(b)}}

// ====== CRASH / DRAGON RUSH ======
let cr=false,cM=1,cP=0,cBt=0,cO=false,cT=0,cPts=[];
const cCv=document.getElementById('crashCanvas'),cCx=cCv.getContext('2d');
let cTrail=[];
function crRz(){cCv.width=cCv.offsetWidth*2;cCv.height=cCv.offsetHeight*2}
function cDr(){const w=cCv.width,h=cCv.height;cCx.clearRect(0,0,w,h);
// Stars background
if(!cCv._stars){cCv._stars=[];for(let i=0;i<60;i++)cCv._stars.push({x:Math.random()*w,y:Math.random()*h,s:Math.random()*2+.5,b:Math.random()})}
cCv._stars.forEach(s=>{s.b+=0.02;const a=0.3+Math.sin(s.b)*0.25;cCx.beginPath();cCx.arc(s.x,s.y,s.s,0,Math.PI*2);cCx.fillStyle=`rgba(255,200,100,${a})`;cCx.fill()});
// Dragon position
const mm=Math.max(2,cM*1.2);const progress=Math.min((cM-1)/(mm-1),1);const dx=w*0.5+Math.sin(Date.now()/300)*20;const dy=h-40-(progress)*(h-80);
// Add to trail
if(cr||cO)cTrail.push({x:dx,y:dy,t:Date.now(),a:1});
cTrail=cTrail.filter(p=>Date.now()-p.t<1500);
// Draw energy trail
const tColor=cO?[255,215,0]:cr?[255,107,53]:[255,50,50];
for(let i=0;i<cTrail.length;i++){const p=cTrail[i];const age=(Date.now()-p.t)/1500;const a=(1-age)*0.6;const sz=8+age*20;
cCx.beginPath();cCx.arc(p.x+(Math.random()-.5)*10,p.y+(Math.random()-.5)*5,sz,0,Math.PI*2);
cCx.fillStyle=`rgba(${tColor[0]},${tColor[1]},${tColor[2]},${a*0.3})`;cCx.fill()}
// Fire particles from dragon
if(cr){for(let i=0;i<3;i++){const px=dx+(Math.random()-.5)*20;const py=dy+20+Math.random()*15;const ps=4+Math.random()*8;
cCx.beginPath();cCx.arc(px,py,ps,0,Math.PI*2);const fc=Math.random()>.5?`rgba(255,${~~(Math.random()*100+80)},0,${Math.random()*.5+.2})`:`rgba(255,${~~(Math.random()*200+55)},0,${Math.random()*.3+.1})`;
cCx.fillStyle=fc;cCx.fill()}}
// Draw dragon body
const wingFlap=Math.sin(Date.now()/100)*0.3;const bob=Math.sin(Date.now()/200)*3;const fy=dy+bob;
cCx.save();cCx.translate(dx,fy);
// Glow
const glowSize=20+cM*3;const gCol=cO?'rgba(255,215,0,':'rgba(255,107,53,';
cCx.shadowColor=cO?'#ffd700':cr?'#ff6b35':'#ff3333';cCx.shadowBlur=glowSize;
// Wings
cCx.fillStyle=cr||cO?'rgba(255,80,0,0.8)':'rgba(180,50,50,0.6)';
cCx.beginPath();cCx.moveTo(0,-5);cCx.quadraticCurveTo(-45,-30+wingFlap*25,-55,-15+wingFlap*30);cCx.quadraticCurveTo(-35,-5,-10,5);cCx.fill();
cCx.beginPath();cCx.moveTo(0,-5);cCx.quadraticCurveTo(45,-30-wingFlap*25,55,-15-wingFlap*30);cCx.quadraticCurveTo(35,-5,10,5);cCx.fill();
// Body
cCx.shadowBlur=glowSize/2;
const bodyGrad=cCx.createLinearGradient(0,-20,0,20);
bodyGrad.addColorStop(0,cr||cO?'#ff6b35':'#cc3333');bodyGrad.addColorStop(1,cr||cO?'#cc3300':'#881111');
cCx.fillStyle=bodyGrad;cCx.beginPath();cCx.ellipse(0,0,14,20,0,0,Math.PI*2);cCx.fill();
// Head
cCx.fillStyle=cr||cO?'#ff8844':'#cc4444';cCx.beginPath();cCx.ellipse(0,-22,10,12,0,0,Math.PI*2);cCx.fill();
// Eyes
cCx.fillStyle='#fff';cCx.beginPath();cCx.ellipse(-5,-24,3,3.5,0,0,Math.PI*2);cCx.fill();
cCx.beginPath();cCx.ellipse(5,-24,3,3.5,0,0,Math.PI*2);cCx.fill();
cCx.fillStyle=cr?'#ffcc00':'#ff0000';cCx.beginPath();cCx.arc(-5,-24,1.5,0,Math.PI*2);cCx.fill();
cCx.beginPath();cCx.arc(5,-24,1.5,0,Math.PI*2);cCx.fill();
// Horns
cCx.strokeStyle='#ffd700';cCx.lineWidth=2.5;cCx.beginPath();cCx.moveTo(-6,-32);cCx.lineTo(-10,-42);cCx.stroke();
cCx.beginPath();cCx.moveTo(6,-32);cCx.lineTo(10,-42);cCx.stroke();
// Tail
cCx.strokeStyle=cr||cO?'#ff6b35':'#cc3333';cCx.lineWidth=4;cCx.beginPath();cCx.moveTo(0,18);cCx.quadraticCurveTo(-15,35+Math.sin(Date.now()/150)*5,-5,45);cCx.stroke();
// Tail flame
if(cr){cCx.fillStyle='rgba(255,200,0,0.7)';cCx.beginPath();cCx.arc(-5,47,5+Math.random()*3,0,Math.PI*2);cCx.fill();
cCx.fillStyle='rgba(255,100,0,0.5)';cCx.beginPath();cCx.arc(-5,50,3+Math.random()*4,0,Math.PI*2);cCx.fill()}
cCx.shadowBlur=0;cCx.restore();
// Crash explosion
if(!cr&&!cO&&cPts.length>2){const age=(Date.now()-cT)/1000-Math.log(cP)/0.4;if(age>=0&&age<1){for(let i=0;i<8;i++){const ang=i/8*Math.PI*2+age*2;const dist=age*80;const ex=dx+Math.cos(ang)*dist;const ey=dy+Math.sin(ang)*dist;const ea=1-age;
cCx.beginPath();cCx.arc(ex,ey,6+age*10,0,Math.PI*2);cCx.fillStyle=`rgba(255,${~~(50+Math.random()*100)},0,${ea*0.6})`;cCx.fill()}}}
// Altitude meter on right
cCx.fillStyle='rgba(255,255,255,0.06)';cCx.fillRect(w-30,40,8,h-80);
const meterH=(h-80)*progress;cCx.fillStyle=cr||cO?'rgba(255,107,53,0.5)':'rgba(255,50,50,0.4)';cCx.fillRect(w-30,h-40-meterH,8,meterH);
}
function cStart(){const b=gb('cBet');if(!b||cr)return;cBt=b;uB(-b);cr=true;cO=false;cM=1;cP=1+Math.random()*.5+Math.pow(Math.random(),2)*15;cPts=[1];cT=Date.now();cTrail=[];cCv._stars=null;document.getElementById('cStartBtn').style.display='none';document.getElementById('cCashBtn').style.display='';document.getElementById('cRes').innerHTML='';document.getElementById('cSt').textContent='âš¡ Power level rising...';cTk()}
function cTk(){if(!cr)return;cM=Math.pow(Math.E,(Date.now()-cT)/1000*.4);cPts.push(cM);const d=document.getElementById('cMult');d.textContent=cM.toFixed(2)+'Ã—';d.style.color=cM<2?'#ff6b35':cM<5?'#ffd700':'#ff0';d.style.textShadow=`0 0 ${Math.min(cM*8,50)}px ${d.style.color}`;cDr();if(cM>=cP){cr=false;d.textContent=cP.toFixed(2)+'Ã—';d.style.color='#ff3333';d.style.textShadow='0 0 30px #ff3333';document.getElementById('cSt').textContent='ğŸ’¥ OVERLOADED!';document.getElementById('cStartBtn').style.display='';document.getElementById('cCashBtn').style.display='none';if(!cO){sR('cRes',false,`ğŸ’¥ Exploded at ${cP.toFixed(2)}Ã— â€” Lost ${cBt}`);aH('c',false,cP.toFixed(1))}return}requestAnimationFrame(cTk)}
function cCash(){if(!cr||cO)return;cO=true;const w=~~(cBt*cM);uB(w);sR('cRes',true,`âš¡ ${cM.toFixed(2)}Ã— â€” Won ${w}!`);aH('c',true,cM.toFixed(1));conf();document.getElementById('cSt').textContent='ğŸ‰ Energy secured!';document.getElementById('cCashBtn').style.display='none';document.getElementById('cStartBtn').style.display='';cr=false}

// ====== SLOTS / POCKET CREATURES ======
const SY=['ğŸ”¥','ğŸ’§','ğŸŒ¿','âš¡','ğŸ²','ğŸª¨','ğŸŒŸ'],SM={'ğŸ”¥':5,'ğŸ’§':3,'ğŸŒ¿':4,'ğŸª¨':3,'âš¡':10,'ğŸ²':15,'ğŸŒŸ':20};
let sOn=false;
function sSpin(){if(sOn)return;const b=gb('sBet');if(!b)return;sOn=true;uB(-b);document.getElementById('sRes').innerHTML='';document.getElementById('sBtn').disabled=true;
const rl=[0,1,2].map(i=>document.getElementById('s'+i));rl.forEach(r=>r.classList.add('spin'));
const rs=[0,1,2].map(()=>{const r=Math.random();return r<.01?'ğŸŒŸ':r<.04?'ğŸ²':r<.1?'âš¡':r<.25?'ğŸ”¥':r<.45?'ğŸ’§':r<.65?'ğŸŒ¿':'ğŸª¨'});
rs.forEach((s,i)=>{setTimeout(()=>{rl[i].classList.remove('spin');rl[i].textContent=s;if(i===2){let w=0;if(rs[0]===rs[1]&&rs[1]===rs[2]){const m=SM[rs[0]]||3;w=b*m;sR('sRes',true,`${rs.join('')} Ã—${m}! Caught +${w}!`);conf()}else if(rs[0]===rs[1]||rs[1]===rs[2]||rs[0]===rs[2]){w=~~(b*1.5);sR('sRes',true,`Partial catch! +${w}`)}else sR('sRes',false,`They escaped! -${b}`);if(w>0)uB(w);aH('s',w>0,w>0?'ğŸ”®':'âœ—');sOn=false;document.getElementById('sBtn').disabled=false}},400+i*500)})}

// ====== ROULETTE / NINJA WHEEL ======
let rC=null,rOn=false;
const RN=[{n:0,c:'green'},{n:32,c:'red'},{n:15,c:'black'},{n:19,c:'red'},{n:4,c:'black'},{n:21,c:'red'},{n:2,c:'black'},{n:25,c:'red'},{n:17,c:'black'},{n:34,c:'red'},{n:6,c:'black'},{n:27,c:'red'},{n:13,c:'black'},{n:36,c:'red'},{n:11,c:'black'},{n:30,c:'red'},{n:8,c:'black'},{n:23,c:'red'},{n:10,c:'black'},{n:5,c:'red'},{n:24,c:'black'},{n:16,c:'red'},{n:33,c:'black'},{n:1,c:'red'},{n:20,c:'black'},{n:14,c:'red'},{n:31,c:'black'},{n:9,c:'red'},{n:22,c:'black'},{n:18,c:'red'},{n:29,c:'black'},{n:7,c:'red'},{n:28,c:'black'},{n:12,c:'red'},{n:35,c:'black'},{n:3,c:'red'},{n:26,c:'black'}];
function rSel(c,el){document.querySelectorAll('.rb').forEach(b=>b.classList.remove('sel'));el.classList.add('sel');rC=c}
function rSpin(){if(rOn||!rC){if(!rC)toast('âš ï¸ Pick a jutsu!','#ff9600');return}const b=gb('rBet');if(!b)return;rOn=true;uB(-b);document.getElementById('rRes').innerHTML='';document.getElementById('rBtn').disabled=true;document.getElementById('rN').textContent='?';
const wh=document.getElementById('rW'),ri=~~(Math.random()*RN.length),res=RN[ri],sa=360/RN.length,ta=360-(ri*sa+sa/2),tr=(5+~~(Math.random()*3))*360+ta;
wh.style.transition='none';wh.style.transform='rotate(0deg)';requestAnimationFrame(()=>requestAnimationFrame(()=>{wh.style.transition='transform 4s cubic-bezier(.2,.8,.3,1)';wh.style.transform=`rotate(${tr}deg)`}));
setTimeout(()=>{document.getElementById('rN').textContent=res.n;const w=rC===res.c,em=res.c==='red'?'ğŸ”¥':res.c==='green'?'ğŸƒ':'ğŸŒ‘';if(w){const m=res.c==='green'?14:2;const win=b*m;uB(win);sR('rRes',true,`${em} ${res.n} â€” Jutsu hit! +${win}`);conf()}else sR('rRes',false,`${em} ${res.n} â€” Jutsu missed! -${b}`);aH('r',w,em);rOn=false;document.getElementById('rBtn').disabled=false},4200)}

// ====== BLACKJACK / SHADOW LEDGER ======
let bjDk=[],bjP=[],bjD=[],bjBt=0,bjOn=false;
const SU=['â™ ','â™¥','â™¦','â™£'],RA=['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
function mkD(){bjDk=[];for(let s of SU)for(let r of RA)bjDk.push({r,s});for(let i=bjDk.length-1;i>0;i--){const j=~~(Math.random()*(i+1));[bjDk[i],bjDk[j]]=[bjDk[j],bjDk[i]]}}
function cv(c){return'JQK'.includes(c.r)?10:c.r==='A'?11:parseInt(c.r)}
function hv(h){let t=0,a=0;for(let c of h){t+=cv(c);if(c.r==='A')a++}while(t>21&&a>0){t-=10;a--}return t}
function rc(c,fd){if(fd)return'<div class="bj-c fd"></div>';return`<div class="bj-c ${c.s==='â™¥'||c.s==='â™¦'?'red':''}">${c.r}<span style="font-size:11px">${c.s}</span></div>`}
function bjR(rev){document.getElementById('pH').innerHTML=bjP.map(c=>rc(c)).join('');document.getElementById('dH').innerHTML=bjD.map((c,i)=>i===1&&!rev?rc(c,1):rc(c)).join('');document.getElementById('pSc').textContent=hv(bjP);document.getElementById('dSc').textContent=rev?hv(bjD):cv(bjD[0])+'+?'}
function bjDeal(){const b=gb('bjBet');if(!b||bjOn)return;bjBt=b;uB(-b);mkD();bjP=[bjDk.pop(),bjDk.pop()];bjD=[bjDk.pop(),bjDk.pop()];bjOn=true;document.getElementById('bjA').style.display='flex';document.getElementById('bjDBtn').style.display='none';document.getElementById('bjDb').style.display=B>=bjBt?'':'none';document.getElementById('bjRes').innerHTML='';bjR();if(hv(bjP)===21)bjStand()}
function bjHit(){if(!bjOn)return;bjP.push(bjDk.pop());document.getElementById('bjDb').style.display='none';bjR();if(hv(bjP)>21)bjEnd()}
function bjStand(){if(!bjOn)return;bjOn=false;bjR(1);const dr=()=>{if(hv(bjD)<17){bjD.push(bjDk.pop());bjR(1);setTimeout(dr,500)}else bjEnd()};setTimeout(dr,500)}
function bjDbl(){if(!bjOn||B<bjBt)return;uB(-bjBt);bjBt*=2;bjP.push(bjDk.pop());bjR();hv(bjP)>21?bjEnd():bjStand()}
function bjEnd(){bjOn=false;bjR(1);const p=hv(bjP),d=hv(bjD);document.getElementById('bjA').style.display='none';document.getElementById('bjDBtn').style.display='';let w=false,m='';if(p>21)m=`ğŸ’€ Bust! -${bjBt}`;else if(d>21){w=true;uB(bjBt*2);m=`ğŸ““ Shinigami falls! +${bjBt*2}`}else if(p>d){w=true;uB(bjBt*2);m=`ğŸ““ ${p} vs ${d} â€” Victory! +${bjBt*2}`}else if(p===d){uB(bjBt);m='âš–ï¸ Draw!';w=true}else m=`ğŸ’€ ${d} vs ${p} â€” Defeated! -${bjBt}`;sR('bjRes',w,m);if(w&&p!==d)conf();aH('bj',w,w?'ğŸ““':'ğŸ’€')}

// ====== PLINKO / PIRATE PLUNDER ======
const plCv=document.getElementById('plinkoCanvas'),plCx=plCv.getContext('2d');
let plRun=false;
const PL_R=10,PL_M=[8,4,2,1.5,1,0.5,1,1.5,2,4,8];
function plRz(){plCv.width=plCv.offsetWidth*2;plCv.height=plCv.offsetHeight*2;plDS()}
function plDS(){const w=plCv.width,h=plCv.height;plCx.clearRect(0,0,w,h);const gY=h/(PL_R+2),gX=w/(PL_R+3);
for(let row=0;row<PL_R;row++){const dots=row+3,sx=(w-(dots-1)*gX)/2,y=(row+1)*gY;for(let d=0;d<dots;d++){plCx.beginPath();plCx.arc(sx+d*gX,y,4,0,Math.PI*2);plCx.fillStyle='rgba(0,150,255,.35)';plCx.fill()}}
const sw=w/PL_M.length,sy=h-gY*.8;for(let i=0;i<PL_M.length;i++){const m=PL_M[i],clr=m>=4?'#ffd700':m>=2?'#0096ff':m>=1?'#40b0ff':'#ff5050';plCx.fillStyle=clr;plCx.globalAlpha=.2;plCx.fillRect(i*sw+2,sy,sw-4,gY*.6);plCx.globalAlpha=1;plCx.fillStyle=clr;plCx.font=`bold ${w>500?'18':'14'}px Fredoka`;plCx.textAlign='center';plCx.fillText(m+'Ã—',i*sw+sw/2,sy+gY*.38)}}
let plBt=0;
function plDrop(){if(plRun)return;const b=gb('plBet');if(!b)return;plBt=b;uB(-b);plRun=true;document.getElementById('plBtn').disabled=true;document.getElementById('plRes').innerHTML='';
const w=plCv.width,h=plCv.height;let bx=w/2+(Math.random()-.5)*40,by=10,vy=0,vx=0;const gY=h/(PL_R+2),gX=w/(PL_R+3),grav=.4;
function anim(){plDS();plCx.beginPath();plCx.arc(bx,by,10,0,Math.PI*2);plCx.fillStyle='#ffd700';plCx.fill();plCx.shadowColor='#ffd700';plCx.shadowBlur=15;plCx.fill();plCx.shadowBlur=0;
vy+=grav;by+=vy;bx+=vx;vx*=.98;
for(let row=0;row<PL_R;row++){const dots=row+3,sx=(w-(dots-1)*gX)/2,py=(row+1)*gY;for(let d=0;d<dots;d++){const px=sx+d*gX,dx=bx-px,dy=by-py,dist=Math.sqrt(dx*dx+dy*dy);if(dist<14){const ang=Math.atan2(dy,dx);bx=px+Math.cos(ang)*14;by=py+Math.sin(ang)*14;vx=Math.cos(ang)*3+(Math.random()-.5)*2;vy=Math.abs(Math.sin(ang))*2;break}}}
if(bx<10){bx=10;vx=Math.abs(vx)}if(bx>w-10){bx=w-10;vx=-Math.abs(vx)}
if(by>=h-gY*.5){const sw=w/PL_M.length;let idx=Math.max(0,Math.min(PL_M.length-1,~~(bx/sw)));const mult=PL_M[idx],win=~~(plBt*mult);if(win>0)uB(win);const won=mult>=1;sR('plRes',won,won?`ğŸ´â€â˜ ï¸ ${mult}Ã— treasure! +${win}`:`ğŸ´â€â˜ ï¸ ${mult}Ã— â€” Lost ${plBt-win}`);aH('pl',won,mult+'Ã—');if(mult>=4)conf();plRun=false;document.getElementById('plBtn').disabled=false;return}
requestAnimationFrame(anim)}anim()}

// ====== MINES / TITAN FIELD ======
let mG=[],mRv=0,mMn=3,mBt=0,mOn=false,mMl=1;
function setMn(n){mMn=n;document.querySelectorAll('[id^="mb"]').forEach(b=>{b.style.borderColor='rgba(255,255,255,.08)';b.style.color='var(--dim)'});document.getElementById('mb'+n).style.borderColor='#8c7a3c';document.getElementById('mb'+n).style.color='#8c7a3c'}
function mStart(){const b=gb('mBet');if(!b||mOn)return;mBt=b;uB(-b);mOn=true;mRv=0;mMl=1;mG=Array(25).fill(false);const mines=[];while(mines.length<mMn){const r=~~(Math.random()*25);if(!mines.includes(r))mines.push(r)}mines.forEach(i=>mG[i]=true);
document.getElementById('mSBtn').style.display='none';document.getElementById('mCashBtn').style.display='';document.getElementById('mRes').innerHTML='';document.getElementById('mInfo').textContent='âš”ï¸ Scout the field â€” '+mMn+' Titans lurk!';
const g=document.getElementById('mGrid');g.innerHTML='';for(let i=0;i<25;i++){const c=document.createElement('div');c.className='mine-cell';c.textContent='ğŸŒ«ï¸';c.onclick=()=>mRev(i,c);g.appendChild(c)}}
function mRev(i,el){if(!mOn||el.classList.contains('rv'))return;el.classList.add('rv');if(mG[i]){el.classList.add('bomb');el.textContent='ğŸ‘¹';mOn=false;document.getElementById('mCashBtn').style.display='none';document.getElementById('mSBtn').style.display='';document.getElementById('mInfo').textContent='ğŸ‘¹ TITAN ATTACK!';
document.querySelectorAll('.mine-cell').forEach((c,j)=>{if(mG[j]&&!c.classList.contains('rv')){c.classList.add('rv','bomb');c.textContent='ğŸ‘¹'}});
sR('mRes',false,`ğŸ‘¹ Devoured! -${mBt}`);aH('m',false,'ğŸ‘¹')}else{el.classList.add('gem');el.textContent='ğŸ“¦';mRv++;mMl=+(1+mRv*mMn/(25-mMn)*.5).toFixed(2);document.getElementById('mInfo').textContent=`ğŸ“¦ Ã—${mMl} â€” ${mRv} supplies found`;
if(mRv===25-mMn){mOn=false;const w=~~(mBt*mMl);uB(w);document.getElementById('mCashBtn').style.display='none';document.getElementById('mSBtn').style.display='';sR('mRes',true,`ğŸ° All clear! Ã—${mMl} +${w}`);aH('m',true,'ğŸ°');conf()}}}
function mCash(){if(!mOn)return;mOn=false;const w=~~(mBt*mMl);uB(w);document.getElementById('mCashBtn').style.display='none';document.getElementById('mSBtn').style.display='';document.getElementById('mInfo').textContent='ğŸ° Safe retreat!';
document.querySelectorAll('.mine-cell').forEach((c,j)=>{if(mG[j]&&!c.classList.contains('rv')){c.classList.add('rv','bomb');c.textContent='ğŸ‘¹'}});
sR('mRes',true,`ğŸ° Ã—${mMl} +${w}`);aH('m',true,mMl+'Ã—');if(mMl>=2)conf()}

// ====== DICE / BREATH DICE ======
let dCh='over',dRn=false;
function dSel(c,el){dCh=c;document.querySelectorAll('.dc').forEach(b=>b.classList.remove('sel'));el.classList.add('sel');dUpd()}
function dUpd(){const v=parseInt(document.getElementById('dSlider').value);document.getElementById('dTgt').textContent=v;const ch=dCh==='over'?(100-v)/100:v/100;const ml=Math.max(1.01,+(0.96/ch).toFixed(2));document.getElementById('dOdds').textContent=`Ã—${ml} â€¢ ${~~(ch*100)}% chance`}
function dRoll(){if(dRn)return;const b=gb('dBet');if(!b)return;dRn=true;document.getElementById('dBtn').disabled=true;document.getElementById('dRes').innerHTML='';
const tgt=parseInt(document.getElementById('dSlider').value),ch=dCh==='over'?(100-tgt)/100:tgt/100,ml=Math.max(1.01,+(0.96/ch).toFixed(2));
uB(-b);const res=~~(Math.random()*100)+1;let fr=0;
const an=()=>{document.getElementById('dNum').textContent=~~(Math.random()*100)+1;fr++;if(fr<20)setTimeout(an,50);else{document.getElementById('dNum').textContent=res;const won=dCh==='over'?res>tgt:res<tgt;if(won){const w=~~(b*ml);uB(w);sR('dRes',true,`ğŸŒŠ ${res} â€” Ã—${ml} +${w}!`);if(ml>=3)conf()}else sR('dRes',false,`ğŸŒŠ ${res} â€” -${b}`);aH('d',won,res.toString());dRn=false;document.getElementById('dBtn').disabled=false}};an()}
dUpd();

// ====== TOWER / HERO TOWER ======
let tFl=0,tMl=1,tBt=0,tOn=false,tTr=[];const T_F=8;
function tStart(){const b=gb('tBet');if(!b||tOn)return;tBt=b;uB(-b);tOn=true;tFl=0;tMl=1;tTr=[];for(let f=0;f<T_F;f++)tTr.push(~~(Math.random()*3));
document.getElementById('tSBtn').style.display='none';document.getElementById('tCashBtn').style.display='';document.getElementById('tRes').innerHTML='';document.getElementById('tInfo').textContent='ğŸ¦¸ Pick a door on Floor 1!';
const g=document.getElementById('tGrid');g.innerHTML='';for(let f=T_F-1;f>=0;f--){const lbl=document.createElement('div');lbl.className='tfl';lbl.textContent=`Floor ${f+1} â€” Ã—${(1.5**(f+1)).toFixed(1)}`;g.appendChild(lbl);const fl=document.createElement('div');fl.className='tower-floor';fl.id='tf'+f;for(let d=0;d<3;d++){const dr=document.createElement('div');dr.className='tower-door';dr.textContent=f===0?'ğŸšª':'ğŸ”’';dr.onclick=()=>tPick(f,d);fl.appendChild(dr)}g.appendChild(fl)}
document.querySelectorAll('#tf0 .tower-door').forEach(d=>{d.classList.add('cur');d.textContent='ğŸšª'})}
function tPick(f,d){if(!tOn||f!==tFl)return;const safe=tTr[f]!==d;document.getElementById('tf'+f).querySelectorAll('.tower-door').forEach((dr,i)=>{dr.classList.add('rv');if(tTr[f]===i){dr.classList.add('trap');dr.textContent='ğŸ’€'}else{dr.classList.add('safe');dr.textContent='â­'}});
if(!safe){tOn=false;document.getElementById('tCashBtn').style.display='none';document.getElementById('tSBtn').style.display='';document.getElementById('tInfo').textContent='ğŸ’€ Villain attack!';sR('tRes',false,`ğŸ’€ Floor ${f+1} trap! -${tBt}`);aH('t',false,'ğŸ’€')}else{tFl++;tMl=+(1.5**tFl).toFixed(1);if(tFl>=T_F){tOn=false;const w=~~(tBt*tMl);uB(w);document.getElementById('tCashBtn').style.display='none';document.getElementById('tSBtn').style.display='';document.getElementById('tInfo').textContent='ğŸ† NUMBER ONE HERO!';sR('tRes',true,`ğŸ† Ã—${tMl} +${w}!`);aH('t',true,'ğŸ†');conf()}else{document.getElementById('tInfo').textContent=`ğŸ¦¸ Floor ${tFl+1} â€” Current: Ã—${tMl}`;document.querySelectorAll('#tf'+tFl+' .tower-door').forEach(d=>{d.classList.add('cur');d.textContent='ğŸšª'})}}}
function tCash(){if(!tOn||tFl===0)return;tOn=false;const w=~~(tBt*tMl);uB(w);document.getElementById('tCashBtn').style.display='none';document.getElementById('tSBtn').style.display='';document.getElementById('tInfo').textContent='ğŸ† Victory claimed!';
for(let f=tFl;f<T_F;f++){document.getElementById('tf'+f).querySelectorAll('.tower-door').forEach((dr,i)=>{dr.classList.add('rv');if(tTr[f]===i){dr.classList.add('trap');dr.textContent='ğŸ’€'}else{dr.classList.add('safe');dr.textContent='â­'}})}
sR('tRes',true,`ğŸ† Ã—${tMl} +${w}`);aH('t',true,tMl+'Ã—');if(tMl>=3)conf()}

// ====== FLIP / FATE DUEL ======
let fCh=null,fOn=false;
function fSel(c,el){fCh=c;document.querySelectorAll('.fc').forEach(b=>b.classList.remove('sel'));el.classList.add('sel')}
function fFlip(){if(fOn||!fCh){if(!fCh)toast('âš ï¸ Choose Light or Dark!','#9b59b6');return}const b=gb('fBet');if(!b)return;fOn=true;uB(-b);document.getElementById('fBtn').disabled=true;document.getElementById('fRes').innerHTML='';
const res=Math.random()<.5?'heads':'tails',inner=document.getElementById('fInner');inner.classList.remove('flipping');void inner.offsetWidth;inner.classList.add('flipping');
setTimeout(()=>{inner.style.transform=res==='tails'?'rotateY(180deg)':'rotateY(0deg)';inner.classList.remove('flipping');const won=fCh===res;if(won){const w=b*2;uB(w);sR('fRes',true,`${res==='heads'?'ğŸ‘‘ Light':'ğŸ’€ Dark'} wins! +${w}`);conf()}else sR('fRes',false,`${res==='heads'?'ğŸ‘‘ Light':'ğŸ’€ Dark'} wins â€” -${b}`);aH('f',won,res==='heads'?'ğŸ‘‘':'ğŸ’€');fOn=false;document.getElementById('fBtn').disabled=false},850)}

// ====== INIT ======
(function(){try{const s=localStorage.getItem('cp3');if(s){B=parseInt(s);uB(0)}}catch(e){}
crRz();window.addEventListener('resize',()=>{crRz();if(document.getElementById('pg-plinko').classList.contains('active'))plRz()});
cDr();plRz();
mkP('pt-crash',['#ff6b35','#ffd700','#ff3300']);
mkP('pt-slots',['#dc1e1e','#ff4444','#880000']);
mkP('pt-roulette',['#ff9600','#ffb84d','#cc7700']);
mkP('pt-bj',['#b40032','#800020','#ff0040']);
mkP('pt-pl',['#0096ff','#40b0ff','#004488']);
mkP('pt-mn',['#8c7a3c','#6b5b2a','#b8a050']);
mkP('pt-dc',['#00cccc','#008888','#40e0e0']);
mkP('pt-tw',['#6432c8','#8050e0','#4020a0']);
mkP('pt-fl',['#9b59b6','#6a0dad','#c77dff'])})();
</script>
</body>
</html>
